<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      /* 
        createDate: 2021-02-01

        nÂ çš‡åé—®é¢˜ ç ”ç©¶çš„æ˜¯å¦‚ä½•å°† nÂ ä¸ªçš‡åæ”¾ç½®åœ¨ nÃ—n çš„æ£‹ç›˜ä¸Šï¼Œå¹¶ä¸”ä½¿çš‡åå½¼æ­¤ä¹‹é—´ä¸èƒ½ç›¸äº’æ”»å‡»ã€‚
        ç»™ä½ ä¸€ä¸ªæ•´æ•° n ï¼Œè¿”å› n çš‡åé—®é¢˜ ä¸åŒçš„è§£å†³æ–¹æ¡ˆçš„æ•°é‡ã€‚
        
        * * * * * * * * * * * * *
        *     * ğŸ’› *     *     *
        * * * * * * * * * * * * *
        *     *     *     * ğŸ’› *
        * * * * * * * * * * * * *
        * ğŸ’› *     *     *     *
        * * * * * * * * * * * * *
        *     *     * ğŸ’› *     *
        * * * * * * * * * * * * * 

        * * * * * * * * * * * * *
        *     *     *  K  *     *
        * * * * * * * * * * * * *
        *  K  *     *     *     *
        * * * * * * * * * * * * *
        *     *     *     *  K  *
        * * * * * * * * * * * * *
        *     *  K  *     *     *
        * * * * * * * * * * * * * 
        
        è¾“å…¥ï¼šn = 4
        è¾“å‡ºï¼š2
        è§£é‡Šï¼šå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œ4 çš‡åé—®é¢˜å­˜åœ¨ä¸¤ä¸ªä¸åŒçš„è§£æ³•ã€‚

        è¾“å…¥ï¼šn = 1
        è¾“å‡ºï¼š1
     */

      /* 
        å›æº¯çš„å…·ä½“åšæ³•æ˜¯ï¼šä¾æ¬¡åœ¨æ¯ä¸€è¡Œæ”¾ç½®ä¸€ä¸ªçš‡åï¼Œæ¯æ¬¡æ–°æ”¾ç½®çš„çš‡åéƒ½ä¸èƒ½å’Œå·²ç»æ”¾ç½®çš„çš‡åä¹‹é—´æœ‰æ”»å‡»ï¼Œå³æ–°æ”¾ç½®çš„çš‡åä¸èƒ½å’Œä»»ä½•ä¸€ä¸ªå·²ç»æ”¾ç½®çš„çš‡ååœ¨åŒä¸€åˆ—ä»¥åŠåŒä¸€æ¡æ–œçº¿ä¸Šã€‚å½“ NN ä¸ªçš‡åéƒ½æ”¾ç½®å®Œæ¯•ï¼Œåˆ™æ‰¾åˆ°ä¸€ä¸ªå¯èƒ½çš„è§£ï¼Œå°†å¯èƒ½çš„è§£çš„æ•°é‡åŠ  11ã€‚
        ç”±äºæ¯ä¸ªçš‡åå¿…é¡»ä½äºä¸åŒåˆ—ï¼Œå› æ­¤å·²ç»æ”¾ç½®çš„çš‡åæ‰€åœ¨çš„åˆ—ä¸èƒ½æ”¾ç½®åˆ«çš„çš‡åã€‚ç¬¬ä¸€ä¸ªçš‡åæœ‰ NN åˆ—å¯ä»¥é€‰æ‹©ï¼Œç¬¬äºŒä¸ªçš‡åæœ€å¤šæœ‰ N-1Nâˆ’1 åˆ—å¯ä»¥é€‰æ‹©ï¼Œç¬¬ä¸‰ä¸ªçš‡åæœ€å¤šæœ‰ N-2Nâˆ’2 åˆ—å¯ä»¥é€‰æ‹©ï¼ˆå¦‚æœè€ƒè™‘åˆ°ä¸èƒ½åœ¨åŒä¸€æ¡æ–œçº¿ä¸Šï¼Œå¯èƒ½çš„é€‰æ‹©æ•°é‡æ›´å°‘ï¼‰ï¼Œå› æ­¤æ‰€æœ‰å¯èƒ½çš„æƒ…å†µä¸ä¼šè¶…è¿‡ N!N! ç§ï¼Œéå†è¿™äº›æƒ…å†µçš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(N!)O(N!)ã€‚
        ä¸ºäº†é™ä½æ€»æ—¶é—´å¤æ‚åº¦ï¼Œæ¯æ¬¡æ”¾ç½®çš‡åæ—¶éœ€è¦å¿«é€Ÿåˆ¤æ–­æ¯ä¸ªä½ç½®æ˜¯å¦å¯ä»¥æ”¾ç½®çš‡åï¼Œæ˜¾ç„¶ï¼Œæœ€ç†æƒ³çš„æƒ…å†µæ˜¯åœ¨ O(1)O(1) çš„æ—¶é—´å†…åˆ¤æ–­è¯¥ä½ç½®æ‰€åœ¨çš„åˆ—å’Œä¸¤æ¡æ–œçº¿ä¸Šæ˜¯å¦å·²ç»æœ‰çš‡åã€‚
        ä»¥ä¸‹ä¸¤ç§æ–¹æ³•åˆ†åˆ«ä½¿ç”¨é›†åˆå’Œä½è¿ç®—å¯¹çš‡åçš„æ”¾ç½®ä½ç½®è¿›è¡Œåˆ¤æ–­ï¼Œéƒ½å¯ä»¥åœ¨ O(1)O(1) çš„æ—¶é—´å†…åˆ¤æ–­ä¸€ä¸ªä½ç½®æ˜¯å¦å¯ä»¥æ”¾ç½®çš‡åï¼Œç®—æ³•çš„æ€»æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ O(N!)O(N!)ã€‚
     
        ä¸€ï¼šåŸºäºé›†åˆçš„å›æº¯
        ä¸ºäº†åˆ¤æ–­ä¸€ä¸ªä½ç½®æ‰€åœ¨çš„åˆ—å’Œä¸¤æ¡æ–œçº¿ä¸Šæ˜¯å¦å·²ç»æœ‰çš‡åï¼Œä½¿ç”¨ä¸‰ä¸ªé›†åˆ 
        columnsã€1diagonalså’Œ 2diagonals 
        åˆ†åˆ«è®°å½•æ¯ä¸€åˆ—ä»¥åŠä¸¤ä¸ªæ–¹å‘çš„æ¯æ¡æ–œçº¿ä¸Šæ˜¯å¦æœ‰çš‡åã€‚

        */

      /* 
        nï¼šåˆ—
        rowï¼šè¡Œ
        columnsï¼šä¸èƒ½å çš„åˆ—ä¸‹æ ‡é›†åˆ
        diagonals1ï¼šä¸èƒ½ç«™çš„æ–œçº¿é›†åˆ(å·¦ä¸Š=>å³ä¸‹)
        diagonals2ï¼šä¸èƒ½ç«™çš„æ–œçº¿é›†åˆ(å³ä¸Š=>å·¦ä¸‹)
      */
      function backtrack(n, row, columns, diagonals1, diagonals2) {
        if (row === n) {
          return 1;
        } else {
          let count = 0; //ç¬¦åˆè¦æ±‚çš„ä¸ªæ•°

          for (let i = 0; i < n; i++) {
            // å¦‚æœè¯´ åˆ—é›†åˆ æˆ–è€… æ–œçº¿é›†åˆ ä¸­åŒ…å«äº†å½“å‰å¾ªç¯çš„åˆ— i æˆ– æ–œçº¿æ ‡è®°(diagonal1/diagonal2)ï¼Œå°±è·³è¿‡è¿™ä¸€æ¬¡å¾ªç¯
            if (columns.has(i)) {
              continue;
            }
            const diagonal1 = row - i;
            if (diagonals1.has(diagonal1)) {
              continue;
            }
            const diagonal2 = row + i;
            if (diagonals2.has(diagonal2)) {
              continue;
            }

            // å¦‚æœè¯´ åˆ—é›†åˆ å’Œ æ–œçº¿é›†åˆ éƒ½ä¸åŒ…å«å½“å‰åˆ—ï¼Œé‚£å°±ç›´æ¥æ·»åŠ åˆ°è¯¥é›†åˆä¸­
            columns.add(i);
            diagonals1.add(diagonal1);
            diagonals2.add(diagonal2);
            console.log(`åˆ—columnsï¼š`, columns);
            console.log(`åˆ—diagonals1ï¼š`, diagonals1);
            console.log(`åˆ—diagonals2ï¼š`, diagonals2);
            count += backtrack(n, row + 1, columns, diagonals1, diagonals2);
            console.log(`-------------åˆ é™¤å¯¹åº”çš„åˆ—å’Œæ–œçº¿é›†åˆ--------------`);
            columns.delete(i);
            diagonals1.delete(diagonal1);
            diagonals2.delete(diagonal2);
          }
          console.log(count);
          return count;
        }
      }
      function totalNQueens(n) {
        const columns = new Set(); // ä¸èƒ½ç«™çš„ åˆ—é›†åˆ
        const diagonals1 = new Set(); // ä¸èƒ½ç«™çš„ æ–œçº¿é›†åˆ å·¦ä¸Š=>å³ä¸‹ (è¡¨ç¤ºï¼šè¡Œä¸‹æ ‡-åˆ—ä¸‹æ ‡)
        const diagonals2 = new Set(); // ä¸èƒ½ç«™çš„ æ–œçº¿é›†åˆ å³ä¸Š=>å·¦ä¸‹ (è¡¨ç¤ºï¼šè¡Œä¸‹æ ‡+åˆ—ä¸‹æ ‡)
        return backtrack(n, 0, columns, diagonals1, diagonals2);
      }

      totalNQueens(4);

      /* 
        createDate :2021-02-02
        æœªçŸ¥ æ•´æ•°æ•°ç»„ arr ç”± n ä¸ªéè´Ÿæ•´æ•°ç»„æˆã€‚
        ç»ç¼–ç åå˜ä¸ºé•¿åº¦ä¸º n - 1 çš„å¦ä¸€ä¸ªæ•´æ•°æ•°ç»„ encoded ï¼Œ
        
        a XOR b( aå¼‚æˆ–b )  aå’Œbä¸åŒ ç»“æœä¸º1 ï¼Œç›¸åŒç»“æœåˆ™ä¸º0
 
        å…¶ä¸­ encoded[i] = arr[i] XOR arr[i + 1] ã€‚
        ä¾‹å¦‚ï¼Œarr = [1,0,2,1] ç»ç¼–ç åå¾—åˆ° encoded = [1,2,3] ã€‚
        ç»™ä½ ç¼–ç åçš„æ•°ç»„ encoded å’ŒåŸæ•°ç»„ arr çš„ç¬¬ä¸€ä¸ªå…ƒç´  firstï¼ˆarr[0]ï¼‰ã€‚
        è¯·è§£ç è¿”å›åŸæ•°ç»„ arr ã€‚å¯ä»¥è¯æ˜ç­”æ¡ˆå­˜åœ¨å¹¶ä¸”æ˜¯å”¯ä¸€çš„ã€‚

        è¾“å…¥ï¼šencoded = [1,2,3], first = 1
        è¾“å‡ºï¼š[1,0,2,1]
        è§£é‡Šï¼šè‹¥ arr = [1,0,2,1] ï¼Œé‚£ä¹ˆ first = 1 ä¸” encoded = [1 XOR 0, 0 XOR 2, 2 XOR 1] = [1,2,3]
                                                                 
        è¾“å…¥ï¼šencoded = [6,2,7,3], first = 4
        è¾“å‡ºï¼š         [4,2,0,7,4]      
      */

      function decode(encoded, first) {
        let arr = Array.of(first)
        encoded.forEach((item,index)=>{
          arr[index+1] = item^arr[index]
        })
        return arr
      }
      decode([6,2,7,3],4);
    </script>
  </body>
</html>
